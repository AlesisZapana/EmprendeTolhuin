{% extends 'base.html.twig' %}

{% block title %}Lista de solicitudes{% endblock %}

{% block body %}
    <h1>Solicitudes</h1>
    <a class="btn btn-primary btn-sm" href="{{ path('solicitud_new') }}">Crear nueva solicitud</a>
    {% if is_granted('ROLE_MUNICIPIO') %}
    <a class="btn btn-primary btn-sm" href="{{path('estadosolicitud_index')}}">Nuevo estado de solicitud</a>
    {% endif %}
    
    <table class="table">
        <thead>
            <tr>
                <th>Razon Social</th>
                <th>CUIT</th>
                <th>Direccion</th>
                <th>Rubro</th>
                <th>Telefono</th>
                <th>Mail</th>
                <th>Titular Nombre</th>
                <th>Titular Apellido</th>
                <th>DNI</th>
                <th>Estado</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
        {% for solicitud in solicituds %}
            <tr>
                <td>{{ solicitud.razonsocial }}</td>
                <td>{{ solicitud.cuit }}</td>
                <td>{{ solicitud.direccion }}</td>
                <td>{{ solicitud.rubro }}</td>
                <td>{{ solicitud.telefono }}</td>
                <td>{{ solicitud.mail }}</td>
                <td>{{ solicitud.titularnombre }}</td>
                <td>{{ solicitud.titularapellido }}</td>
                <td>{{ solicitud.dni }}</td>
                <td>{{ solicitud.estado }}</td>
                <td>
                    <a class="badge badge-primary" href="{{ path('solicitud_show', {'id': solicitud.id}) }}">Ver</a>
                    <a class="badge badge-primary" href="{{ path('solicitud_edit', {'id': solicitud.id}) }}">Editar</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="14">No se encontraron solicitudes</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}
